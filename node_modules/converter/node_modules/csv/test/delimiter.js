// Generated by CoffeeScript 1.8.0

/*
Test CSV - Copyright David Worms <open@adaltas.com> (BSD Licensed)
 */

(function() {
  var csv, fs, should;

  fs = require('fs');

  should = require('should');

  csv = process.env.CSV_COV ? require('../lib-cov') : require('../src');

  describe('delimiter', function() {
    it('Test empty value', function(next) {
      return csv().from.string("20322051544,,8.8017226E7,45,\n,1974,8.8392926E7,,").transform(function(record, index) {
        record.length.should.eql(5);
        if (index === 0) {
          record[1].should.eql('');
          record[4].should.eql('');
        } else if (index === 1) {
          record[0].should.eql('');
          record[3].should.eql('');
          record[4].should.eql('');
        }
        return record;
      }).on('end', function(count) {
        return count.should.eql(2);
      }).to.string(function(result) {
        result.should.eql("20322051544,,8.8017226E7,45,\n,1974,8.8392926E7,,");
        return next();
      });
    });
    return it('Test tabs to comma', function(next) {
      return csv().from.string("20322051544\t\t8.8017226E7\t45\t\n\t1974\t8.8392926E7\t\t", {
        delimiter: '\t'
      }).transform(function(record, index) {
        record.length.should.eql(5);
        if (index === 0) {
          record[1].should.eql('');
          record[4].should.eql('');
        } else if (index === 1) {
          record[0].should.eql('');
          record[3].should.eql('');
          record[4].should.eql('');
        }
        return record;
      }).on('end', function(count) {
        return count.should.eql(2);
      }).to.string(function(result) {
        result.should.eql("20322051544,,8.8017226E7,45,\n,1974,8.8392926E7,,");
        return next();
      }, {
        delimiter: ','
      });
    });
  });

}).call(this);

//# sourceMappingURL=delimiter.js.map
